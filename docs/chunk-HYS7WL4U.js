import{C as g}from"./chunk-AYEDX2M7.js";import{A as o,O as u,R as c,W as l,j as n,m as i}from"./chunk-ZGXC4ISU.js";var p=class a{constructor(t){this.http=t;this.loadInitialLanguage(),this.currentLanguage$.subscribe(e=>{this.loadTranslations(e)})}defaultLanguage="cz";currentLanguageSource=new n(this.defaultLanguage);currentLanguage$=this.currentLanguageSource.asObservable();currentTranslationsSource=new n(null);currentTranslations$=this.currentTranslationsSource.asObservable();translations={};loadInitialLanguage(){let t=localStorage.getItem("selectedLanguage");t&&["cz","sk","en"].includes(t)?this.currentLanguageSource.next(t):this.currentLanguageSource.next(this.defaultLanguage)}loadTranslations(t){this.http.get(`assets/i18n/${t}.json`).pipe(u(e=>{this.translations=e,this.currentTranslationsSource.next(this.translations)}),o(e=>(t!==this.defaultLanguage?this.loadTranslations(this.defaultLanguage):(this.translations={},this.currentTranslationsSource.next(this.translations)),i({})))).subscribe()}setLanguage(t){this.currentLanguageSource.getValue()!==t&&["cz","sk","en"].includes(t)&&(localStorage.setItem("selectedLanguage",t),this.currentLanguageSource.next(t))}getText(t){let e=t.split("."),r=this.translations;for(let s of e)if(r&&typeof r=="object"&&r.hasOwnProperty(s))r=r[s];else return t;return typeof r=="string"?r:t}static \u0275fac=function(e){return new(e||a)(l(g))};static \u0275prov=c({token:a,factory:a.\u0275fac,providedIn:"root"})};export{p as a};
