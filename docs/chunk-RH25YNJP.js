import{C as g}from"./chunk-BPBWVEAM.js";import{K as c,N as u,S as l,i as r,l as i,x as o}from"./chunk-KQIGX7DT.js";var p=class n{constructor(t){this.http=t;this.loadInitialLanguage(),this.currentLanguage$.subscribe(e=>{this.loadTranslations(e)})}defaultLanguage="cz";currentLanguageSource=new r(this.defaultLanguage);currentLanguage$=this.currentLanguageSource.asObservable();currentTranslationsSource=new r(null);currentTranslations$=this.currentTranslationsSource.asObservable();translations={};loadInitialLanguage(){let t=localStorage.getItem("selectedLanguage");t&&["cz","sk","en"].includes(t)?this.currentLanguageSource.next(t):this.currentLanguageSource.next(this.defaultLanguage)}loadTranslations(t){this.http.get(`assets/i18n/${t}.json`).pipe(c(e=>{this.translations=e,this.currentTranslationsSource.next(this.translations)}),o(e=>(console.error(`Chyba p\u0159i na\u010D\xEDt\xE1n\xED p\u0159eklad\u016F pro ${t}:`,e),t!==this.defaultLanguage?(console.warn(`Pokus o na\u010Dten\xED v\xFDchoz\xEDho jazyka (${this.defaultLanguage}) kv\u016Fli chyb\u011B.`),this.loadTranslations(this.defaultLanguage)):(this.translations={},this.currentTranslationsSource.next(this.translations)),i({})))).subscribe()}setLanguage(t){this.currentLanguageSource.getValue()!==t&&["cz","sk","en"].includes(t)&&(localStorage.setItem("selectedLanguage",t),this.currentLanguageSource.next(t))}getText(t){let e=t.split("."),a=this.translations;for(let s of e)if(a&&typeof a=="object"&&a.hasOwnProperty(s))a=a[s];else return console.warn(`Lokaliza\u010Dn\xED kl\xED\u010D '${t}' nenalezen.`),t;return typeof a=="string"?a:t}static \u0275fac=function(e){return new(e||n)(l(g))};static \u0275prov=u({token:n,factory:n.\u0275fac,providedIn:"root"})};export{p as a};
